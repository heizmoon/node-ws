<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>魔法少女契约书 - Magical Girl Covenant</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&family=Noto+Serif+JP:wght@500;700&display=swap');

        :root {
            --primary-pink: #ff85a2;
            --deep-purple: #0d0221;
            --accent-gold: #ffd700;
        }

        body {
            margin: 0;
            padding: 0;
            /* 使用固定背景，增加随机种子避免加载失败 */
            background: #0d0221 url('https://image.pollinations.ai/prompt/anime%20scenery%20starry%20night%20sky%20nebula%20dreamlike%20purple%20and%20pink%20colors?width=1280&height=720&nologo=true&seed=999') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            font-family: 'Noto Serif SC', 'Noto Serif JP', serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            /* 魔法棒光标 */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="%23ff85a2" stroke="%23fff" stroke-width="1.5" d="M24.5,2.5 L29.5,7.5 L12,25 L7,20 L24.5,2.5 Z M2,30 L5,27 L8,30 L5,33 Z" /><circle cx="5" cy="30" r="2" fill="%23ffd700"/></svg>') 0 32, auto;
        }

        h1 {
            font-size: 3rem;
            margin: 40px 0;
            text-align: center;
            background: linear-gradient(to bottom, #fff, var(--primary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px var(--primary-pink));
            letter-spacing: 8px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .character-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            padding: 20px;
            z-index: 2;
        }

        .char-card {
            position: relative;
            width: 260px;
            height: 380px;
            border-radius: 24px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
            cursor: pointer;
        }

        .img-wrapper {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #1a1a1a;
        }

        .char-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8);
            transition: all 0.6s ease;
        }

        .char-card:hover {
            transform: translateY(-20px);
            border-color: var(--primary-pink);
            box-shadow: 0 0 40px var(--primary-pink);
        }

        .char-card:hover .char-img {
            transform: scale(1.15);
            filter: brightness(1.1);
        }

        /* 魔法阵特效 */
        .magic-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 350px;
            height: 350px;
            background: url('https://image.pollinations.ai/prompt/glowing%20white%20magic%20summoning%20circle%20complex%20geometry%20isolated%20on%20black?width=512&height=512&nologo=true') no-repeat center;
            background-size: contain;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            mix-blend-mode: screen;
            pointer-events: none;
            z-index: 5;
            transition: all 0.5s ease;
        }

        .char-card:hover .magic-circle {
            opacity: 0.7;
            transform: translate(-50%, -50%) scale(0.9) rotate(360deg);
            animation: spin 12s linear infinite;
        }

        @keyframes spin { to { transform: translate(-50%, -50%) scale(0.9) rotate(360deg); } }

        /* 粒子特效 */
        .particles { position: absolute; inset: 0; pointer-events: none; z-index: 6; }
        .p { position: absolute; bottom: -10px; background: #fff; border-radius: 50%; opacity: 0; filter: blur(1px); }
        .char-card:hover .p { animation: rise 1.8s ease-out infinite; }

        @keyframes rise {
            0% { transform: translateY(0) scale(1); opacity: 0; }
            30% { opacity: 0.8; }
            100% { transform: translateY(-250px) scale(0); opacity: 0; }
        }

        /* 底部信息栏 */
        #magic-display {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 250px;
            background: rgba(13, 2, 33, 0.98);
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            border-top: 3px solid var(--primary-pink);
            box-shadow: 0 -10px 30px rgba(0,0,0,0.8);
            z-index: 100;
        }

        #magic-display.show { transform: translateY(0); }

        .display-content { display: flex; align-items: center; max-width: 1100px; width: 90%; gap: 40px; }
        .crest-box { width: 160px; height: 160px; position: relative; }
        .crest-img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 0 15px var(--primary-pink)); }
        .info-box { flex-grow: 1; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; border-left: 1px solid rgba(255,255,255,0.2); padding-left: 30px; }
        .info-col h2 { color: var(--primary-pink); margin: 0 0 15px 0; font-size: 2rem; }
        .info-col p { line-height: 1.8; font-size: 1.1rem; color: #ddd; }
        .close-btn { position: absolute; top: 20px; right: 30px; cursor: pointer; font-size: 32px; color: #fff; }

    </style>
</head>
<body>

    <h1>✨ 魔法少女契約書 ✨</h1>

    <div class="character-container" id="card-container">
        <!-- 角色卡片将由 JS 动态生成以增加随机种子 -->
    </div>

    <div id="magic-display">
        <div class="close-btn" onclick="hideDetails()">×</div>
        <div class="display-content">
            <div class="crest-box"><img id="d-crest" src="" class="crest-img"></div>
            <div class="info-box">
                <div class="info-col"><h2 id="d-name"></h2><p id="d-desc"></p></div>
                <div class="info-col"><h2 id="d-name-jp" style="font-family: 'Noto Serif JP';"></h2><p id="d-desc-jp" style="font-family: 'Noto Serif JP';"></p></div>
            </div>
        </div>
    </div>

    <script>
        const characters = [
            {
                id: 1,
                name: "绯红 · 艾丽莎",
                nameJp: "緋色のエマ",
                desc: "掌握极意之火的少女。她的契约是为了驱散世间的寒冷与阴霾。必杀技是「红莲大爆裂」。",
                descJp: "極意の火を操る少女。彼女の契約は世界の寒さと闇を払うためのもの。必殺技は「紅蓮大爆裂」。",
                hue: 0,
                prompt: "anime girl magical girl red frilly dress fire magic fireball masterpiece 4k"
            },
            {
                id: 2,
                name: "苍蓝 · 塞勒涅",
                nameJp: "蒼藍のセレネ",
                desc: "月光下的寒冰使者。拥有冻结时间的神圣力量，性格冷静。契约愿望是「永恒的安宁」。",
                descJp: "月光の下の氷の使者。時間を凍結させる神聖な力を持ち、冷静な性格。願いは「永遠の安らぎ」。",
                hue: 210,
                prompt: "anime girl magical girl blue elegant dress ice crystal snow magic masterpiece 4k"
            },
            {
                id: 3,
                name: "翠绿 · 温迪",
                nameJp: "翠緑のウェンディ",
                desc: "风之精灵的宠儿。能够治愈万物并操控暴风。她的契约源于对大自然的热爱。",
                descJp: "風の精霊の愛し子。万物を癒やし、嵐を操る。彼女の契約は大自然への愛から生まれた。",
                hue: 120,
                prompt: "anime girl magical girl green outfit wind magic leaves nature wings masterpiece 4k"
            }
        ];

        const container = document.getElementById('card-container');

        // 动态生成卡片，加入随机种子避免缓存或频率限制
        characters.forEach(char => {
            const seed = Math.floor(Math.random() * 100000);
            const card = document.createElement('div');
            card.className = 'char-card';
            card.onclick = () => showDetails(char, seed);
            
            card.innerHTML = `
                <div class="img-wrapper">
                    <img src="https://image.pollinations.ai/prompt/${encodeURIComponent(char.prompt)}?width=400&height=600&nologo=true&seed=${seed}" class="char-img">
                </div>
                <div class="magic-circle" style="filter: hue-rotate(${char.hue}deg) brightness(1.5);"></div>
                <div class="particles">
                    ${Array(5).fill(0).map((_, i) => `<div class="p" style="left:${20+i*15}%; animation-delay:${i*0.3}s; width:${3+i}px; height:${3+i}px;"></div>`).join('')}
                </div>
            `;
            container.appendChild(card);
        });

        function showDetails(char, seed) {
            // 纹章也加入随机种子
            const crestPrompt = encodeURIComponent(`${char.name} magic symbol emblem crest high quality gold glowing`);
            document.getElementById('d-crest').src = `https://image.pollinations.ai/prompt/${crestPrompt}?width=300&height=300&nologo=true&seed=${seed}`;
            
            document.getElementById('d-name').innerText = char.name;
            document.getElementById('d-name-jp').innerText = char.nameJp;
            document.getElementById('d-desc').innerText = char.desc;
            document.getElementById('d-desc-jp').innerText = char.descJp;
            
            document.getElementById('magic-display').classList.add('show');
        }

        function hideDetails() {
            document.getElementById('magic-display').classList.remove('show');
        }
    </script>
</body>
</html>
